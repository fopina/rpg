<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=theme-color content="#494f5c"><meta name=msapplication-TileColor content="#494f5c"><meta itemprop=name content="0xCF53 Remote, Garage Remote"><meta itemprop=description content="Dr. No Open One of my garage openers stopped working but I kept it in hope one day I&rsquo;d make a learning exercise out of repairing it.
The other day somehow I brought it up in a conversation and it was highlighted that it is common for the push button to wear out, so I opened the case and tested by shorting over the button with a wire.
And the garage door opened (thanks Dad)!"><meta itemprop=datePublished content="2020-11-01T18:40:57+00:00"><meta itemprop=dateModified content="2020-11-03T23:33:26+00:00"><meta itemprop=wordCount content="633"><meta itemprop=keywords content="raspberrypi,eletronics,domotics,"><meta property="og:title" content="0xCF53 Remote, Garage Remote"><meta property="og:description" content="Dr. No Open One of my garage openers stopped working but I kept it in hope one day I&rsquo;d make a learning exercise out of repairing it.
The other day somehow I brought it up in a conversation and it was highlighted that it is common for the push button to wear out, so I opened the case and tested by shorting over the button with a wire.
And the garage door opened (thanks Dad)!"><meta property="og:type" content="article"><meta property="og:url" content="https://rpg.skmobi.com/posts/0xcf53_rgr/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-11-01T18:40:57+00:00"><meta property="article:modified_time" content="2020-11-03T23:33:26+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="0xCF53 Remote, Garage Remote"><meta name=twitter:description content="Dr. No Open One of my garage openers stopped working but I kept it in hope one day I&rsquo;d make a learning exercise out of repairing it.
The other day somehow I brought it up in a conversation and it was highlighted that it is common for the push button to wear out, so I opened the case and tested by shorting over the button with a wire.
And the garage door opened (thanks Dad)!"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color><link rel="shortcut icon" href=/favicon.ico><title>0xCF53 Remote, Garage Remote</title><link rel=stylesheet href=https://rpg.skmobi.com/css/style.min.eac77496566fd7d5768fd650ddb0b2b181ca6a2d7c5fdd6fe6b8ba4bf47e566f.css integrity="sha256-6sd0llZv19V2j9ZQ3bCysYHKai18X91v5ri6S/R+Vm8=" crossorigin=anonymous><link rel=stylesheet href=https://rpg.skmobi.com/css/foo.css></head><body id=page><header id=site-header class="animated slideInUp"><div class="hdr-wrapper section-inner"><div class=hdr-left><div class=site-branding><a href=https://rpg.skmobi.com>Random Post Generator</a></div><nav class="site-nav hide-in-mobile"><a href=https://rpg.skmobi.com/posts/>Posts</a>
<a href=https://rpg.skmobi.com/about/>About</a></nav></div><div class="hdr-right hdr-icons"><span class="hdr-social hide-in-mobile"><a href=https://twitter.com/skboy target=_blank rel="noopener me" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a href=https://github.com/fopina target=_blank rel="noopener me" title=Github><svg xmlns="http://www.w3.org/2000/svg" class="feather" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></span><button id=menu-btn class=hdr-btn title=Menu><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></div></header><div id=mobile-menu class="animated fast"><ul><li><a href=https://rpg.skmobi.com/posts/>Posts</a></li><li><a href=https://rpg.skmobi.com/about/>About</a></li></ul></div><main class="site-main section-inner animated fadeIn faster"><article class=thin><header class=post-header><div class=post-meta><span>Nov 1, 2020 - 3 min read</span></div><h1>0xCF53 Remote, Garage Remote</h1></header><div class=content><h2 id=dr-no-open>Dr. No Open<a href=#dr-no-open class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>One of my garage openers stopped working but I kept it in hope one day I&rsquo;d make a learning exercise out of repairing it.</p><p>The other day somehow I brought it up in a conversation and it was highlighted that it is common for the push button to wear out, so I opened the case and tested by shorting over the button with a wire.<br>And the garage door opened (thanks Dad)!</p><p><a href=/posts/0xcf53_rgr/remote_1.jpeg><img src=/posts/0xcf53_rgr/remote_1_hu8ec6b6cc74a9a32ea27ee816486b4937_175217_150x0_resize_q75_box.jpeg#inline width=150 height=200></a>
<a href=/posts/0xcf53_rgr/remote_2.jpeg><img src=/posts/0xcf53_rgr/remote_2_huc3cf7066b61b5fc727fd4db0caade3d6_242171_150x0_resize_q75_box.jpeg#inline width=150 height=200></a>
<a href=/posts/0xcf53_rgr/remote_3.jpeg><img src=/posts/0xcf53_rgr/remote_3_hub05e4f94435c691abe24cf940f219232_206405_150x0_resize_q75_box.jpeg#inline width=150 height=200></a></p><p>Instead of replacing the push button why not use a raspberry to enable the remote?<br>Then a webapp could open the garage door?</p><blockquote><p>Alexa, ask Home Assistant to open garage</p></blockquote><h2 id=from-stackoverflow-with-love>From StackOverflow With Love<a href=#from-stackoverflow-with-love class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>I have used <a href=https://en.wikipedia.org/wiki/Relay>relay switches</a> in the past to open <a href=https://en.wikipedia.org/wiki/Electromagnetic_lock>maglocks</a> but the loud <em>clack</em> was annoying and mechanical sounded unnecessary.</p><p>Picked up a multimeter and measured at the push button:</p><ul><li>V=10v (opener uses 12v battery)</li><li>I=4mA</li></ul><p>Looking into alternatives considered using a simple transistor but sharing GND between the garage opener (12v) and the raspberry (3v3) didn&rsquo;t sound safe.</p><p>Dove into the huge world of ICs (thanks x7!) and, overwhelmed with the options, Google led me exactly to <a href=https://electronics.stackexchange.com/questions/76682/shorting-a-remote-control-pushbutton-with-gpio-and-a-transistor>this post in SO</a>. Should&rsquo;ve started with that&mldr;</p><p>An octocoupler, LED on one side, transistor with photosensor on the other side. Two isolated circuits, nice one!</p><p>According to <a href=http://www.mosaic-industries.com/embedded-systems/microcontroller-projects/raspberry-pi/gpio-pin-electrical-specifications#rpi-gpio-input-voltage-and-output-current-limitations>this</a>, no more than 16mA should be drawn from an output pin in the GPIO and I had a bunch of 330 ohm resistors:</p><ul><li><code>3v3 = 330 ohm * I</code> > <code>I = 10 mA</code></li></ul><p>Open up <a href=https://www.digikey.com/en/products/detail/lite-on-inc/4N25/385762>4N25 datasheet</a>: LED on pins 1 and 2 and emitter and collector on 4 and 5.</p><p>Schemed it in <a href=https://www.digikey.pt/schemeit/project/rgr1-cc1bac87b73e494884bbe0246aa2afe0/>Digikey</a>, then plugging the bits into a breadboard and connecting to a <a href=https://www.raspberrypi.org/products/raspberry-pi-zero-w/>Pi 0 WiFi</a>:</p><p><a href=/posts/0xcf53_rgr/scheme1.png><img src=/posts/0xcf53_rgr/scheme1_hu2b2452184f27a22128abfd49f5d9a7ab_394485_500x0_resize_box_3.png width=500 height=168></a>
<a href=/posts/0xcf53_rgr/basic.jpeg><img src=/posts/0xcf53_rgr/basic_huef0e227d741b1d54e2d60df26055aa77_279911_300x0_resize_q75_box.jpeg width=300 height=400></a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># shell over python, just for fun</span>
</span></span><span class=line><span class=cl><span class=c1># export pin to userspace</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;18&#34;</span> &gt; /sys/class/gpio/export
</span></span><span class=line><span class=cl><span class=c1># Sets pin 18 as an output</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;out&#34;</span> &gt; /sys/class/gpio/gpio18/direction
</span></span><span class=line><span class=cl><span class=c1># &#34;push&#34; the button</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;1&#34;</span> &gt; /sys/class/gpio/gpio18/value
</span></span><span class=line><span class=cl><span class=c1># for 3 seconds</span>
</span></span><span class=line><span class=cl>sleep <span class=m>3</span>
</span></span><span class=line><span class=cl><span class=c1># release</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;0&#34;</span> &gt; /sys/class/gpio/gpio18/value 
</span></span></code></pre></div><p>And Sesame is open.</p><h2 id=you-must-live-twice>You Must Live Twice<a href=#you-must-live-twice class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>All good and simple, but what about feedback? If the garage opener battery is dead, the Pi cannot <em>see</em> it anywhere&mldr;</p><p>Let&rsquo;s use a second GPIO pin as input and enable it with the current from the opener!<br>But the Pi works on 3v and the opener is working on 10v&mldr;<br>Déjà vu, another 4N25 it is then, the other way around: input will be the garage opener and the output will be connecting Pi 3v3 to the input GPIO pin.</p><ul><li>Updated the scheme in <a href=https://www.digikey.pt/schemeit/project/rgr1-cc1bac87b73e494884bbe0246aa2afe0/b59742577e02417988ec0c8ade0acb29>Digikey</a></li></ul><a href=/posts/0xcf53_rgr/scheme2.png><img src=/posts/0xcf53_rgr/scheme2_hub59d32c9272cd5a9921cbd512959cabd_239752_500x0_resize_box_3.png width=500 height=212></a><ul><li>Applied it in the breadboard</li></ul><a href=/posts/0xcf53_rgr/basic_2.jpeg><img src=/posts/0xcf53_rgr/basic_2_hu67307361ed8a787880e671b3b667181a_289354_300x0_resize_q75_box.jpeg width=300 height=400></a><p>And there: enabling GPIO 18 will enable the opener that then enables GPIO 24. If opener battery is dead, it won&rsquo;t trigger the second 4N25, not enabling GPIO 24.</p><p>In this setup, there&rsquo;s no GND connected to GPIO 24 so the GPIO setup needs proper <code>pull_up_down</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>GPIO</span><span class=o>.</span><span class=n>setup</span><span class=p>(</span><span class=mi>24</span><span class=p>,</span> <span class=n>GPIO</span><span class=o>.</span><span class=n>IN</span><span class=p>,</span> <span class=n>pull_up_down</span><span class=o>=</span><span class=n>GPIO</span><span class=o>.</span><span class=n>PUD_DOWN</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=pentapussy>Pentapussy<a href=#pentapussy class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>Time to trim a stripboard and solder!</p><p><a href=/posts/0xcf53_rgr/penta1.jpeg><img src=/posts/0xcf53_rgr/penta1_hu4839fef8723a485f1eb3e57ecdc2f7d6_162711_0x250_resize_q75_box.jpeg#inline width=268 height=250></a>
<a href=/posts/0xcf53_rgr/penta2.jpeg><img src=/posts/0xcf53_rgr/penta2_hu97d8da35f928ea3ee29bf723c9a864cb_285945_0x250_resize_q75_box.jpeg#inline width=333 height=250></a></p><p>Nice mess of wires but it ended up small</p><table><thead><tr><th>Wire</th><th>Pin</th></tr></thead><tbody><tr><td>Green</td><td>Pi GPIO 18</td></tr><tr><td>Blue</td><td>Pi GND</td></tr><tr><td>Red</td><td>Garage Opener GND</td></tr><tr><td>Brown</td><td>Garage Opener Vcc</td></tr><tr><td>Orange</td><td>Pi 3v3</td></tr><tr><td>Yellow</td><td>Pi GPIO 24</td></tr></tbody></table><h2 id=licence-to-click>Licence to Click<a href=#licence-to-click class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>This wouldn&rsquo;t be very useful without software to use it.</p><p>To change a bit from Python, found a clean <a href=https://github.com/warthog618/gpio>Go lib</a> (that uses the sysfs interface) and made a simple one-button webapp <a href=https://github.com/fopina/rgrweb>rgrweb</a>.</p><p><img src=https://raw.githubusercontent.com/fopina/rgrweb/assets/Image.GIF alt=rgrweb></p><p>Added some testing flags to use it as a CLI tool. As there is feedback (after adding the second 4N25), it can be used to fully test the circuit wihout actually standing next to the garage door.</p><p><a href="https://asciinema.org/a/J1YR3McPxz5NykMiu7M9PcVxb?autoplay=1"><img src=https://asciinema.org/a/J1YR3McPxz5NykMiu7M9PcVxb.svg alt=asciicast></a></p><h2 id=the-word-is-not-enough>The Word is Not Enough<a href=#the-word-is-not-enough class=anchor aria-hidden=true><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 015 5 5 5 0 01-5 5h-3m-6 0H6a5 5 0 01-5-5 5 5 0 015-5h3"/><line x1="8" y1="12" x2="16" y2="12"/></svg></a></h2><p>Apologies for using <code>Garage Remote</code> in the title instead of <code>Garage Opener</code> (which I prefer and use in the rest of the text), but IoT pun called for it&mldr; Remote Garage Remote&mldr;</p></div><hr class=post-end><footer class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://rpg.skmobi.com/tags/raspberrypi>raspberrypi</a></span><span class=tag><a href=https://rpg.skmobi.com/tags/eletronics>eletronics</a></span><span class=tag><a href=https://rpg.skmobi.com/tags/domotics>domotics</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>633 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2020-11-01 18:40 +0000</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"/><line x1="1.05" y1="12" x2="7" y2="12"/><line x1="17.01" y1="12" x2="22.96" y2="12"/></svg><a href=https://github.com/fopina/rpg/commit/c21d7addb69487fdad8b56ea250ec1d48509b3f1 target=_blank rel=noopener>c21d7ad</a> @ 2020-11-03</p></footer></article><div class="post-nav thin"><a class=next-post href=https://rpg.skmobi.com/posts/0x9b4b_gcp_metrics/><span class=post-nav-label><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>&nbsp;Newer</span><br><span>0x9B4B Free Telemetry</span></a>
<a class=prev-post href=https://rpg.skmobi.com/posts/0xf8cb_pi_tv/><span class=post-nav-label>Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span><br><span>0xF8CB Pi TV - Lock HDMI Configuration</span></a></div><div id=comments class=thin><script src=https://utteranc.es/client.js repo=fopina/rpg issue-term=title theme=github-light crossorigin=anonymous label=comment async></script></div></main><footer id=site-footer class="section-inner thin animated fadeIn faster"><p>&copy; 2022 <a href=https://rpg.skmobi.com>Filipe Pina</a></p><p>Made with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> &#183; Theme <a href=https://github.com/Track3/hermit target=_blank rel=noopener>Hermit</a> &#183; <a href=https://rpg.skmobi.com/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></p></footer><script src=https://rpg.skmobi.com/js/bundle.min.5a42c67b729ee2fa1059251688235399704707e04edb4e28c42c6f6dfa49d1d9.js integrity="sha256-WkLGe3Ke4voQWSUWiCNTmXBHB+BO204oxCxvbfpJ0dk=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FRYVGQ292Q"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-FRYVGQ292Q",{anonymize_ip:!1})}</script></body></html>